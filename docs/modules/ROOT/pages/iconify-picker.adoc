= Strapi Iconify Picker: Technical Documentation
:description: Architecture and integration guide for the Strapi Iconify Picker plugin (Strapi v5).
:imagesdir: ../assets/images

The `@sunny-pirate/strapi-plugin-iconify-picker` plugin adds a focused icon picker field to the Strapi Admin. It surfaces icons from installed Iconify collections and stores the selection as structured JSON in your Content Types.

== Requirements

- Strapi v5

== What It Does

- Provides a custom field input to pick an Iconify icon.
- Supports curated collections (governance) via configuration.
- Stores a portable JSON payload: `{ prefix, icon, value }`.

== System Architecture

The plugin runs as a custom field provider in the Strapi Admin and communicates with a backend controller/service that reads from the Iconify ecosystem available in your project.

=== Component Class Diagram

The diagram below shows how the Admin UI and backend pieces relate.

[mermaid]
----
classDiagram
    subgraph Admin_Panel [Admin Interface]
        class IconifyPickerInput {
            -string selectedCollection
            -string search
            -int page
            +render()
            +handleSearch()
        }
        class IconPreviewPanel {
            +displayIcons()
            +handlePagination()
        }
        class PaginationFooter {
            +renderControls()
        }
        IconifyPickerInput --> PaginationFooter
        IconifyPickerInput --> IconPreviewPanel : optional usage
    end

    subgraph Server_API [Strapi Backend]
        class IconifyController {
            +getCollections()
            +getIcons(prefix, limit, offset, q)
        }
        class IconifyService {
            +listCollections()
            +listIcons(prefix, limit, offset)
            +searchIcons(prefix, q, limit, offset)
        }
    end

    IconifyPickerInput ..> IconifyController : REST Request
    IconifyController --> IconifyService : Delegate
----

== Interaction Flow

=== User Selection Sequence

[mermaid]
----
sequenceDiagram
    actor User
    participant Frontend as IconifyPickerInput
    participant API as Strapi API
    participant Service as Iconify Service

    User->>Frontend: Select collection (e.g., "solar")
    Frontend->>API: GET /iconify/collections/solar?limit=100
    API->>Service: listIcons("solar")
    Service-->>API: Returns icon list
    API-->>Frontend: JSON response
    Frontend->>Frontend: Render grid

    User->>Frontend: Search "box"
    Frontend->>API: GET /iconify/collections/solar?q=box
    API->>Service: searchIcons("solar","box")
    Service-->>API: Filtered results
    API-->>Frontend: JSON response

    User->>Frontend: Select icon
    Frontend->>Frontend: Update field value (JSON)
----

== Data Model

The plugin does not create new database tables. It stores a structured object in an existing JSON field.

[mermaid]
----
erDiagram
    ContentType ||--o{ IconField : contains
    IconField {
        string prefix "Collection ID (e.g., solar)"
        string icon "Icon Name (e.g., box-bold)"
        string value "Full ID (e.g., solar:box-bold)"
    }
----

Example payload:

[source,json]
----
{
  "prefix": "solar",
  "icon": "box-bold",
  "value": "solar:box-bold"
}
----

== Integration

=== Enable The Plugin

Register the plugin in `config/plugins.ts`. The configuration key must match the plugin id defined in `package.json` under `strapi.name`.

[source,ts]
----
type StrapiEnv = {
  array: (key: string, defaultValue?: string[]) => string[];
};

export default ({ env }: { env: StrapiEnv }) => ({
  '@sunny-pirate/strapi-plugin-iconify-picker': {
    enabled: true,
    config: {
      collections: env.array('DLS_ICON_COLLECTIONS', ['solar', 'logos', 'flag', 'lucide']),
    },
  },
});
----

=== Integration Architecture

[mermaid]
----
flowchart LR
    Config[config/plugins.ts] -->|Enables| Plugin[@sunny-pirate/strapi-plugin-iconify-picker]
    Plugin -->|Registers| CustomField[Custom Field: iconify-picker]
    ContentTypeBuilder -->|Selects| CustomField
    Admin -->|Requests| API[Strapi API endpoints]
    API -->|Reads| IconData[Installed Iconify collections (external packages)]
----

== Step-by-Step Configuration Guide

Follow this visual guide to get up and running.s

=== 1. Plugin Configuration

Verify the plugin is active and configure available collections.

image::guide-step-01.png[Settings Page]

=== 2. Content Type Builder

Add the Iconify Picker field to your schema.

image::guide-step-02.png[Content Type Builder]

=== 3. Adding the Field

Find the picker under Custom Fields (or JSON-compatible fields depending on your setup).

image::guide-step-03.png[Select Custom Field]

=== 4. Field Configuration

Name your field (for example, `icon`) and save.

image::guide-step-04.png[Configure Field]

=== 5. Saving the Content Type

Save your changes. Strapi will rebuild the Admin.

image::guide-step-05.png[Save Schema]

=== 6. Using the Picker

Create or edit an entry and use the Iconify Picker field.

image::guide-step-06.png[Content Manager Entry]

=== 7. Selecting Icons

Filter by collection or search within the selected collection.

image::guide-step-07.png[Select Icon]

== Iconify and Icon Sets Licensing

This plugin integrates with the Iconify ecosystem but is not an official or endorsed Iconify product.

- Icon sets have their own licenses and attribution requirements.
- This plugin does not bundle icon data or icon set packages.
- If you distribute icon sets, include the relevant licenses and attributions for those sets.
- Do not imply affiliation or endorsement by Iconify.

== Screenshots

=== Configuration Panel
image::strapi-iconify-picker-configuration.png[Configuration Screen]

=== Usage Interface
image::strapi-iconify-picker-usage.png[Usage Interface]
